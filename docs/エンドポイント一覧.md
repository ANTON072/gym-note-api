# API エンドポイント一覧

## 概要

Gym Note API で提供されているエンドポイントの一覧です。すべての API エンドポイントは`/api/v1`のプレフィックスが付きます（ヘルスチェックを除く）。

## ワークアウトの記録フロー

1. **ワークアウト開始**: `POST /api/v1/workouts` で開始時刻のみを指定してワークアウトを作成
2. **エクササイズ追加**: 作成したワークアウトに対して、エクササイズとセットを追加
3. **ワークアウト完了**: 必要に応じて終了時刻を更新

## 認証

ほとんどのエンドポイントは Firebase 認証トークンが必要です。リクエストヘッダーに以下を含めてください：

```text
Authorization: Bearer {firebase_id_token}
```

## エンドポイント一覧

### ヘルスチェック

| メソッド | パス  | 説明                             | 認証 |
| -------- | ----- | -------------------------------- | ---- |
| GET      | `/up` | アプリケーションの稼働状態を確認 | 不要 |

### ワークアウト関連

| メソッド | パス                               | 説明                                   | 認証 |
| -------- | ---------------------------------- | -------------------------------------- | ---- |
| GET      | `/api/v1/workouts`                 | ワークアウト一覧取得                   | 必要 |
| GET      | `/api/v1/workouts?date=YYYY-MM-DD` | 特定日のワークアウト取得               | 必要 |
| GET      | `/api/v1/workouts/:id`             | ワークアウト詳細取得                   | 必要 |
| POST     | `/api/v1/workouts`                 | ワークアウト作成（開始時刻のみで作成） | 必要 |
| PUT      | `/api/v1/workouts/:id`             | ワークアウト更新（終了時刻の設定など） | 必要 |
| DELETE   | `/api/v1/workouts/:id`             | ワークアウト削除                       | 必要 |

### ワークアウトエクササイズ関連

| メソッド | パス                                     | 説明                             | 認証 |
| -------- | ---------------------------------------- | -------------------------------- | ---- |
| POST     | `/api/v1/workouts/:workout_id/exercises` | ワークアウトにエクササイズを追加 | 必要 |
| PUT      | `/api/v1/workout_exercises/:id`          | ワークアウトエクササイズを更新   | 必要 |
| DELETE   | `/api/v1/workout_exercises/:id`          | ワークアウトエクササイズを削除   | 必要 |

#### パラメータ

**ワークアウト一覧取得**

- `date_from` (optional) - 開始日（YYYY-MM-DD 形式）
- `date_to` (optional) - 終了日（YYYY-MM-DD 形式）
- `page` (optional) - ページ番号（デフォルト: 1）

※ 1 ページあたりの件数は固定（20 件）です。

### 種目マスタ関連

| メソッド | パス                         | 説明               | 認証 |
| -------- | ---------------------------- | ------------------ | ---- |
| GET      | `/api/v1/exercises/strength` | 筋トレ種目一覧取得 | 必要 |
| GET      | `/api/v1/exercises/cardio`   | 有酸素種目一覧取得 | 必要 |

#### パラメータ

**種目一覧取得（共通）**

- `q` (optional) - 検索キーワード（種目名での部分一致検索）

### ユーザー設定関連

| メソッド | パス               | 説明                   | 認証 |
| -------- | ------------------ | ---------------------- | ---- |
| DELETE   | `/api/v1/users/me` | アカウント削除（退会） | 必要 |

## レスポンス形式

### 成功レスポンス

```json
{
  "data": {
    // レスポンスデータ
  },
  "meta": {
    // ページネーション情報など（該当する場合）
  }
}
```

### エラーレスポンス

```json
{
  "error": {
    "code": "エラーコード",
    "message": "エラーメッセージ"
  }
}
```

## 実装ステータス

- ✅ 実装済み
- 🚧 実装中
- 📝 未実装

現在の実装状況：

- ✅ ヘルスチェック
- 📝 その他すべてのエンドポイント

## 開発ツール

API の開発・テストには以下のツールを使用できます：

- **Postman**: https://web.postman.co/workspace/gym-note-api~ade0227e-3921-4634-b24a-e04fdf90b54c/overview
- **Firebase Emulator**: ローカル環境での認証テスト用
